<!DOCTYPE html>
<html>

{% load static %}

<head>
  <title>GrapesJS Studio Home</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>


<body id="icm8-2" class="gjs-t-body">
  <div id="iv4hwy-2" class="gjs-divider"></div>
  <div data-type-role="flex-row" id="ie9na2" class="gjs-plg-flex-row">
    <div data-type-role="flex-column" id="ijubk9" class="gjs-plg-flex-column"><a href="" id="ic9be-2-2-2-3"
        class="gjs-t-button button">
        <div id="itlw3i-2-2-3">
          <div data-type-icon="" id="i9ezgk-2-4-2-4" class="gjs-icon"><svg version="1.0" id="Layer_1-2-4-2"
              xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 64 64"
              enable-background="new 0 0 64 64" xml:space="preserve" fill="#000000">
              <g id="SVGRepo_bgCarrier-4-2-4-2" stroke-width="0"></g>
              <g id="SVGRepo_tracerCarrier-4-2-4-2" stroke-linecap="round" stroke-linejoin="round"></g>
              <g id="SVGRepo_iconCarrier-4-2-4-2">
                <path fill="#FFFFFFFF"
                  d="M62.79,29.172l-28-28C34.009,0.391,32.985,0,31.962,0s-2.047,0.391-2.828,1.172l-28,28 c-1.562,1.566-1.484,4.016,0.078,5.578c1.566,1.57,3.855,1.801,5.422,0.234L8,33.617V60c0,2.211,1.789,4,4,4h16V48h8v16h16 c2.211,0,4-1.789,4-4V33.695l1.195,1.195c1.562,1.562,3.949,1.422,5.516-0.141C64.274,33.188,64.356,30.734,62.79,29.172z">
                </path>
              </g>
            </svg></div>
          <h1 id="i5cni-3-2-2-2-2" class="gjs-t-h1 title">HOME</h1>
        </div>
      </a></div>
    <div data-type-role="flex-column" id="iso6ga" class="gjs-plg-flex-column">
      <div data-type-role="flex-row" id="iui6uq-2" class="gjs-plg-flex-row">
        <div data-type-role="flex-column" id="ir65qj-2" class="gjs-plg-flex-column">
          <div data-type-icon="" id="i9ezgk-2-6" class="gjs-icon"><svg fill="#000000" viewBox="0 0 32 32"
              xmlns="http://www.w3.org/2000/svg">
              <g id="SVGRepo_bgCarrier-10" stroke-width="0"></g>
              <g id="SVGRepo_tracerCarrier-10" stroke-linecap="round" stroke-linejoin="round"></g>
              <g id="SVGRepo_iconCarrier-10">
                <path
                  d="M 16 4 L 15.625 4.15625 L 9.625 6.5625 L 9 6.8125 L 9 13.53125 L 3.59375 15.875 L 3 16.15625 L 3 24.21875 L 3.5 24.53125 L 9.5 27.875 L 9.96875 28.125 L 10.4375 27.90625 L 16 25.125 L 21.5625 27.90625 L 22.03125 28.125 L 22.5 27.875 L 28.5 24.53125 L 29 24.21875 L 29 16.15625 L 28.40625 15.875 L 23 13.53125 L 23 6.8125 L 22.375 6.5625 L 16.375 4.15625 Z M 16 6.1875 L 19.28125 7.46875 L 16 8.75 L 12.71875 7.46875 Z M 11 8.9375 L 15 10.46875 L 15 15.34375 L 11 13.5625 Z M 21 8.9375 L 21 13.5625 L 17 15.34375 L 17 10.46875 Z M 10 15.3125 L 13.625 16.90625 L 10 18.6875 L 6.375 16.875 Z M 22 15.3125 L 25.625 16.875 L 22 18.6875 L 18.375 16.90625 L 19.5 16.40625 Z M 5 18.40625 L 9 20.40625 L 9 25.3125 L 5 23.0625 Z M 27 18.40625 L 27 23.0625 L 23 25.3125 L 23 20.40625 Z M 15 18.46875 L 15 23.375 L 11 25.375 L 11 20.40625 Z M 17 18.46875 L 21 20.40625 L 21 25.375 L 17 23.375 Z">
                </path>
              </g>
            </svg></div>
          <h1 id="i5cni-2-2-3" class="gjs-t-h1 title"><span id="i7p69t">Gebäude allg.</span></h1>
        </div>
        <div data-type-role="flex-column" id="iw974e-2" class="gjs-plg-flex-column">
          <div data-type-icon="" id="i9ezgk-2-2-2" class="gjs-icon"><svg viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg" fill="#000000">
              <g id="SVGRepo_bgCarrier-9" stroke-width="0"></g>
              <g id="SVGRepo_tracerCarrier-9" stroke-linecap="round" stroke-linejoin="round"></g>
              <g id="SVGRepo_iconCarrier-9">
                <path
                  d="M20,4H4A2,2,0,0,0,2,6V18a2,2,0,0,0,2,2H20a2,2,0,0,0,2-2V6A2,2,0,0,0,20,4ZM10,18a6,6,0,1,1,6-6A6,6,0,0,1,10,18ZM19,8a1,1,0,1,1,1-1A1,1,0,0,1,19,8Zm-4,4.25c0,2.25-1.79,2.3-2.38,1.11a1.61,1.61,0,0,0-.53-.54,1.65,1.65,0,0,0-.71-.26,1.82,1.82,0,0,1-.46.61c1,1.85.6,3.83-1.19,3.83-2.23,0-2.28-1.79-1.1-2.38a1.68,1.68,0,0,0,.54-.52,1.76,1.76,0,0,0,.27-.7,1.61,1.61,0,0,1-.63-.46C7,13.93,5,13.53,5,11.75,5,9.5,6.77,9.44,7.36,10.63a1.52,1.52,0,0,0,.53.54,1.81,1.81,0,0,0,.71.27,1.51,1.51,0,0,1,.46-.62C8.06,9,8.46,7,10.24,7h0c2.25,0,2.3,1.78,1.11,2.38a1.58,1.58,0,0,0-.54.52,1.65,1.65,0,0,0-.26.71,1.7,1.7,0,0,1,.61.45C13,10.06,15,10.46,15,12.25Z">
                </path>
                <rect width="24" height="24" fill="none"></rect>
              </g>
            </svg></div>
          <h1 id="i5cni-2-2-2-3" class="gjs-t-h1 title"><span id="ibjz3q">techn. Anlagen</span></h1>
        </div>
        <div data-type-role="flex-column" id="isavpp-2" class="gjs-plg-flex-column">
          <div data-type-icon="" id="i9ezgk-2-5" class="gjs-icon"><svg viewBox="0 0 24 24" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
              <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
              <g id="SVGRepo_iconCarrier">
                <path
                  d="M8 15.9998C7.44772 15.9998 7 16.4475 7 16.9998C7 17.5521 7.44772 17.9998 8 17.9998C8.55228 17.9998 9 17.5521 9 16.9998C9 16.4475 8.55228 15.9998 8 15.9998ZM8 15.9998L8.00707 12M8 16.9998L8.00707 17.0069M20 5C20 6.10457 19.1046 7 18 7C16.8954 7 16 6.10457 16 5C16 3.89543 16.8954 3 18 3C19.1046 3 20 3.89543 20 5ZM12 16.9998C12 19.209 10.2091 20.9998 8 20.9998C5.79086 20.9998 4 19.209 4 16.9998C4 15.9854 4.37764 15.0591 5 14.354L5 6C5 4.34315 6.34315 3 8 3C9.65685 3 11 4.34315 11 6V14.354C11.6224 15.0591 12 15.9854 12 16.9998Z"
                  stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
              </g>
            </svg></div>
          <h1 id="i5cni-2-2-2-2-2" class="gjs-t-h1 title"><span id="ikis26">Wärmequellen</span></h1>
        </div>
        <div data-type-role="flex-column" id="i56cfg-2" class="gjs-plg-flex-column">
          <div data-type-icon="" id="i9ezgk-2-3-2" class="gjs-icon"><svg viewBox="0 0 16 16" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <g id="SVGRepo_bgCarrier-8" stroke-width="0"></g>
              <g id="SVGRepo_tracerCarrier-8" stroke-linecap="round" stroke-linejoin="round"></g>
              <g id="SVGRepo_iconCarrier-8">
                <path d="M13 11V1H9L9 11H13Z" fill="#000000"></path>
                <path d="M15 15V13L1 13V15L15 15Z" fill="#000000"></path>
                <path d="M7 5L7 11H3L3 5H7Z" fill="#000000"></path>
              </g>
            </svg></div>
          <h1 id="i5cni-2-2-2-2-3-3" class="gjs-t-h1 title"><span id="i8yciv">GWP</span></h1>
        </div>
        <div data-type-role="flex-column" id="it8ohg-2" class="gjs-plg-flex-column">
          <div data-type-icon="" id="i9ezgk-2-2-2-2" class="gjs-icon"><svg fill="#E79520FF" viewBox="0 0 1920 1920"
              xmlns="http://www.w3.org/2000/svg" stroke="#000000">
              <g id="SVGRepo_bgCarrier-2-2-2" stroke-width="0"></g>
              <g id="SVGRepo_tracerCarrier-2-2-2" stroke-linecap="round" stroke-linejoin="round"></g>
              <g id="SVGRepo_iconCarrier-2-2-2">
                <g fill-rule="evenodd">
                  <path
                    d="M1185.46.034V564.74h564.705v1355.294H168.99V.034h1016.47ZM900.508 677.68c-16.829 0-31.963 7.567-42.918 21.007-49.807 59.972-31.398 193.016-18.748 272.075 2.823 17.958.452 36.141-7.228 52.518l-107.86 233.223c-7.905 16.942-20.555 30.608-36.592 39.53-68.104 37.835-182.287 89.675-196.066 182.626-4.97 30.268 5.082 56.357 28.574 79.85 15.925 15.133 35.238 22.7 56.245 22.7 81.43 0 132.819-71.717 188.273-148.517 24.62-34.221 61.666-55.229 102.437-60.876 76.349-10.503 167.83-32.527 223.172-46.983 27.897-7.341 56.358-5.534 83.802 3.162 48.565 15.586 66.975 25.073 122.768 25.073 50.371 0 84.818-11.746 101.534-34.447 13.44-16.828 16.715-39.53 10.164-65.619-11.858-42.804-2.033-89.675-133.044-89.675-29.365 0-57.94 2.824-81.77 6.099-36.819 4.97-73.299-10.955-97.016-40.885-32.301-40.546-65.167-88.433-87.981-123.219-16.151-24.508-21.572-53.986-16.264-83.124 15.473-84.706 18.41-147.615-23.492-206.683-17.619-25.186-41.223-37.835-67.99-37.835Zm397.903-660.808 434.936 434.937h-434.936V16.873Z">
                  </path>
                  <path
                    d="M791.057 1297.943c92.273-43.37 275.916-65.28 275.916-65.28-92.386-88.998-145.92-215.04-145.92-215.04-43.257 126.607-119.718 264.282-129.996 280.32">
                  </path>
                </g>
              </g>
            </svg></div>
          <h1 id="i5cni-2-2-2-2-3-2-2" class="gjs-t-h1 title"><span id="iphqmh">Ergebnis</span></h1>
        </div>
      </div>
    </div>
    <div data-type-role="flex-column" id="isf3db" class="gjs-plg-flex-column"></div>
  </div>
  <header id="iypj-2" class="head"></header>
  <div data-type-role="flex-row" id="iz3cc-2" class="gjs-plg-flex-row">
    <div data-type-role="flex-column" id="i3bxl-2" class="gjs-plg-flex-column">
      <form method="get" id="id10y-2"></form>
    </div>
  </div>
  <div data-type-role="flex-row" id="ioi2qg-2" class="gjs-plg-flex-row">
    <div data-type-role="flex-column" id="ikncpe-2" class="gjs-plg-flex-column">
      <h2 id="ibosq-3" class="gjs-t-h2 subtitle"><span id="ijw6lr-2">Nutzenergiebedarf</span></h2>
      <div id="il0h-4" class="card">
        <div data-type-role="flex-row" id="ijfbr6-2" class="gjs-plg-flex-row">
          <div data-type-role="flex-column" id="i5og34-2" class="gjs-plg-flex-column">
            <div id="iewwwb-2">
              <div id="id5fuz-2"><strong><span id="if4xkh-2">- kwh/a</span></strong></div>
            </div>
          </div>
          <div data-type-role="flex-column" id="ivbwvo-2" class="gjs-plg-flex-column">
            <div id="ig6pti-2">
              <div id="i1lhyk-2"><strong><span id="ilepeh-2">- kwh/m²a</span></strong></div>
            </div>
          </div>
        </div>
      </div>
      <h2 id="ibosq-2-3" class="gjs-t-h2 subtitle"><span id="inwx1a-2">Energiebedarf</span></h2>
      <div id="il0h-3-3" class="card">
        <div data-type-role="flex-row" id="ij0ekc-2" class="gjs-plg-flex-row">
          <div data-type-role="flex-column" id="i39cu1-2" class="gjs-plg-flex-column">
            <div id="idepmy-2">
              <div id="ibweov-2"><strong><span id="ihm1d4-2">- kwh/a</span></strong></div>
            </div>
          </div>
          <div data-type-role="flex-column" id="irzh6e-2" class="gjs-plg-flex-column">
            <div id="ilw34t-2">
              <div id="iwj1qx-2"><strong><span id="iz085c-2">- kwh/m²a</span></strong></div>
            </div>
          </div>
        </div>
      </div>
      <h2 id="ibosq-2-2-3" class="gjs-t-h2 subtitle"><span id="ig81p3-2">Primärnergiebedarf</span></h2>
      <div id="il0h-3-2-2-2" class="card">
        <div data-type-role="flex-row" id="izuwvl-2" class="gjs-plg-flex-row">
          <div data-type-role="flex-column" id="ia3aml-2" class="gjs-plg-flex-column">
            <div id="izzrg9-2">
              <div id="i6p4pj-2"><strong><span id="ivn3qd-2">- kwh/a</span></strong></div>
            </div>
          </div>
          <div data-type-role="flex-column" id="iwds1a-2" class="gjs-plg-flex-column">
            <div id="i4pigd-2">
              <div id="ius7sb-2"><strong><span id="iwlzd1-2">- kwh/m²a</span></strong></div>
            </div>
          </div>
        </div>
      </div>
      <h2 id="ibosq-2-2-2-2-2" class="gjs-t-h2 subtitle"><span id="islcnl-2-2">Strom (Überschuss)</span></h2>
      <div id="il0h-3-2-3-2-2" class="card">
        <div data-type-role="flex-row" id="ijy60i-2-2-2" class="gjs-plg-flex-row">
          <div data-type-role="flex-column" id="ilex7l-2-2-2" class="gjs-plg-flex-column">
            <div id="iyu3a3-2-2-2">
              <div id="iwlk2m-2-2-2"><strong><span id="i0dy85-2-2-2">- kwh/a</span></strong></div>
            </div>
          </div>
          <div data-type-role="flex-column" id="iemk91-2-2-2" class="gjs-plg-flex-column">
            <div id="ilcmwe-2-2-2">
              <div id="icivhw-2-2-2"><strong><span id="iw5g8h-2-2-2">- kwh/m²a</span></strong></div>
            </div>
          </div>
        </div>
      </div>
      <h2 id="ibosq-2-2-2-2" class="gjs-t-h2 subtitle"><span id="islcnl-2">Sonnenschutz</span></h2>
      <div id="il0h-3-2-3-3" class="card"><span id="iw5g8h-2-3"><strong id="inm4l1">Nein</strong></span></div>
      <h2 id="ibosq-2-2-2-2-3" class="gjs-t-h2 subtitle"><span id="islcnl-2-3">GWP Var. 1</span></h2>
      <div id="il0h-3-2-3-3-2-2" class="card"><span id="iw5g8h-2-3-2-2"><strong id="i9chvp"> - a</strong></span></div>
      <h2 id="ibosq-2-2-2-2-3-2" class="gjs-t-h2 subtitle"><span id="islcnl-2-3-2">GWP Var. 2</span></h2>
      <div id="il0h-3-2-3-3-2" class="card"><span id="iw5g8h-2-3-2"><strong id="i0n29q"> - a</strong></span></div>
    </div>
    <div data-type-role="flex-column" id="ijjvog-2" class="gjs-plg-flex-column">
      <div id="il0h-2-2" class="card">
        <div id="ic5r8-2-2" class="gjs-custom-code">
          <h1 id="i5cni-3-2-2-2-2-2" class="gjs-t-h1 title">Allgemeine Angaben</h1>
          <div id="floorplan-wrapper-2">
            <div data-type-role="flex-row" id="ijqgsy" class="gjs-plg-flex-row">
              <div data-type-role="flex-column" id="i9wgqm" class="gjs-plg-flex-column"><span
                  id="isjjhq-2-2">Name</span></div>
              <div data-type-role="flex-column" id="izbxz2" class="gjs-plg-flex-column"><input type="text"
                  id="iw9ryk" /></div>
            </div>
            <div data-type-role="flex-row" id="irzocg" class="gjs-plg-flex-row">
              <div data-type-role="flex-column" id="iry2we" class="gjs-plg-flex-column"><span
                  id="isjjhq-2-2-2">Beschreibung</span></div>
              <div data-type-role="flex-column" id="im9na2" class="gjs-plg-flex-column"><input type="text"
                  id="iy8dpc" /></div>
            </div>
            <div data-type-role="flex-row" class="gjs-plg-flex-row">
              <div data-type-role="flex-column" class="gjs-plg-flex-column">
                <span class="isjjhq-2-2-2-geb">Ort</span>
              </div>
              <div data-type-role="flex-column" class="gjs-plg-flex-column">
                <select id="ort" name="ort" class="form-control">
                  <option value="">— bitte wählen —</option>
                  {% for ort in orte %}
                    <option value="{{ ort }}">{{ ort }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
            <div data-type-role="flex-row" class="gjs-plg-flex-row">
              <div data-type-role="flex-column" class="gjs-plg-flex-column">
                <span id="isjjhq-2-2-2-geb">Gebäudeart</span>
              </div>
              <div data-type-role="flex-column" class="gjs-plg-flex-column">
                <select id="geb_klasse" name="geb_klasse" class="form-control">
                  <option value="buero">Bürogebäude</option>
                  <option value="schule">Schule (ohne Dusche)</option>
                  <option value="heim">Heim</option>
                </select>
              </div>
            </div>
            <div data-type-role="flex-row" id="irzocg-2" class="gjs-plg-flex-row">
              <div data-type-role="flex-column" id="iry2we-2" class="gjs-plg-flex-column"><span
                  id="isjjhq-2-2-2-2">Geschosshöhe</span></div>
              <div data-type-role="flex-column" id="im9na2-2" class="gjs-plg-flex-column"><input type="text"
                  id="iy8dpc-2" /></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div data-type-role="flex-column" id="i9g2x7-2" class="gjs-plg-flex-column">
      <div id="iv4hwy" class="gjs-divider"></div>
      <h1 id="i5cni-3-2-2" class="gjs-t-h1 title">Eingabe Hilfe</h1><span id="isjjhq-2">Geben Sie nacheinander alle
        Bauteile der <strong id="i2oy16">thermischen Gebäudehülle</strong> ein. Hierzu geben Sie die einzelnen
        Bauteilschichten von<strong> innen nach außen</strong> an. Beachten Sie die Wärmeübergangswiederstände bei
        *1.</span>
    </div>
  </div>
  <footer id="ietlh-2">
  <div data-type-role="flex-row" id="iz3mn-2" class="gjs-plg-flex-row">
    <!-- Logo ganz links -->
    <div data-type-role="flex-column" id="iy3ds-2" class="gjs-plg-flex-column">
      <img
        src="{% static 'images/Logo.png' %}"
        alt="Mein Logo"
        id="ies6-2"
        class="logo"
      />
    </div>
    <!-- Back-Button -->
    <div data-type-role="flex-column" id="ilnji-2" class="gjs-plg-flex-column">
      <a href="{% url 'allg_angaben' %}" class="gjs-t-button button">
        <div>
          Back
        </div>
      </a>
    </div>
    <!-- Next-Button -->
    <div data-type-role="flex-column" id="i7lnt-2" class="gjs-plg-flex-column">
      <a href="{% url 'baukrper' %}" class="gjs-t-button button">Next</a>
    </div>
    <!-- Platzhalter rechts, falls nötig -->
    <div data-type-role="flex-column" id="idpkn-2" class="gjs-plg-flex-column"></div>
  </div>
</footer>
<script>
  // Lookup-Tabelle: je Gebäudeart voreingestellte Werte
  const gebaeudeDefaults = {
    buero: {
      tw_pro_m2: 15,    // z.B. Trinkwarmwasserbedarf kWh/m²
      lwt_pro_m2: 8,    // Lüftungsenergiebedarf kWh/m²
      bel_pro_m2: 10,   // Beleuchtung kWh/m²
      nutzer_pro_m2: 5  // Prozessenergie kWh/m²
    },
    schule: {
      tw_pro_m2: 5,
      lwt_pro_m2: 6,
      bel_pro_m2: 12,
      nutzer_pro_m2: 2
    },
    heim: {
      tw_pro_m2: 25,
      lwt_pro_m2: 5,
      bel_pro_m2: 8,
      nutzer_pro_m2: 3
    }
  };

  // alle inputs + das select
  const inputs = Array.from(document.querySelectorAll("input[name]"));
  const gebSelect = document.getElementById("geb_klasse");
  // reagiere auch auf Änderungen des Dropdowns
  gebSelect.addEventListener("change", update);
  inputs.forEach(i => i.addEventListener("input", update));

  update(); // Erstaufruf

  function update() {
    const params = new URLSearchParams();

    // 1) Übernehme alle "normalen" Inputs
    inputs.forEach(i => params.set(i.name, i.value));

    // 2) Fülle die Default-Werte für Trinkwasser/Lüftung/Beleuchtung/Prozess
    const defaults = gebaeudeDefaults[ gebSelect.value ];
    for (const [key, val] of Object.entries(defaults)) {
      params.set(key, val);
    }

    // 3) API-Call
    fetch(`/api/berechnung/?${params}`)
      .then(r => r.json())
      .then(data => {
        // Beispielausgaben
        document.getElementById("ausgabe_ne_abs").textContent   = data.nutzenergie.ne_absolut;
        document.getElementById("ausgabe_ne_spec").textContent  = data.nutzenergie.ne_spezifisch;
        // usw.
      })
      .catch(console.error);
  }
</script>
</body>

</html>